[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
user=agentuser

[program:tigervnc]
command=Xvnc :1 -geometry 1280x800 -depth 24 -SecurityTypes VncAuth -PasswordFile /home/agentuser/.vnc/passwd -localhost no -desktop "Agent Desktop"
priority=10
autorestart=true
stdout_logfile=/tmp/tigervnc.log
stderr_logfile=/tmp/tigervnc.err
user=agentuser

[program:novnc]
command=/opt/noVNC/utils/novnc_proxy --vnc localhost:5901 --listen 0.0.0.0:6080
priority=20
autostart=true
autorestart=true
stdout_logfile=/tmp/novnc.log
stderr_logfile=/tmp/novnc.err
user=agentuser

[program:twm]
command=twm
priority=25
autostart=true
autorestart=true
stdout_logfile=/tmp/twm.log
stderr_logfile=/tmp/twm.err
user=agentuser

[program:agent]
command=gemini --model "gemini-2.5-flash" --prompt "%(ENV_JOB_PROMPT)s" --all-files --approval-mode=yolo
priority=30
autostart=true
autorestart=unexpected
startretries=3
stdout_logfile=/tmp/agent.log
stderr_logfile=/tmp/agent.err
environment=DISPLAY=":1",GEMINI_API_KEY="%(ENV_GEMINI_API_KEY)s"
stopsignal=TERM
stopwaitsecs=10
user=agentuser
